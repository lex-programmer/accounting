<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Company App{% endblock %}</title>
    {% load static %}
    <script>
      (function() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.classList.add(savedTheme + '-theme');
        document.documentElement.style.background = savedTheme === 'dark' ? '#121212' : '#f9f9f9';
      })();
    </script>

    <link rel="stylesheet" href="{% static 'core/css/styles.css' %}?v=20251003-3">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <link rel="stylesheet" href="{% static 'core/vendor/jquery-ui.min.css' %}">

    <style>
        /* –¶–µ–ª—å: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–∏–¥–∏–º—ã–º –¢–û–õ–¨–ö–û –í–ò–î–ò–ú–´–ô —á–µ–∫–±–æ–∫—Å,
        –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ Django –≤—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–º.
        */
        #id_contract_is_planned[type="checkbox"] {
            display: inline !important;
            visibility: visible !important;
            opacity: 1 !important;

            /* –°–±—Ä–æ—Å —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
            width: 20px !important;
            height: 20px !important;
            position: static !important;
            transform: none !important;
            margin: 0 5px 0 0 !important;
            padding: 0 !important;
            /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –æ–Ω –≤—ã—à–µ –≤—Å–µ—Ö –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
            z-index: 9999 !important;
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–ª–µ–π–±–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∏–Ω–ø—É—Ç –∏ —Ç–µ–∫—Å—Ç */
        label[for="id_contract_is_planned"] {
            position: relative !important;
            overflow: visible !important;
            display: flex !important; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É flex */
            align-items: center !important;
            gap: 5px !important;
        }
    </style>
    </head>

<body class="light-theme">

    {% if request.user.is_authenticated %}

    <div class="sidebar">
        <img src="{% static 'core/img/Copilot_20251120_115112.png' %}" alt="USARB Accounting Logo" class="sidebar-logo">
        <ul>
            <li><a class="menu-btn" href="{% url 'supplier_list' %}">Agen»õi comerciali</a></li>
            <li><a class="menu-btn" href="{% url 'contract_list' %}">Contracte</a></li>
            <li><a class="menu-btn" href="{% url 'factura_list' %}">Facturi</a></li>
            <li><a class="menu-btn" href="{% url 'plata_list' %}">PlƒÉ»õi</a></li>
            <li><a class="menu-btn" href="{% url 'linia_bugetara' %}">Linia bugetarƒÉ</a> </li>
            <li><a class="menu-btn" href="{% url 'factura_archive' %}">ArhivƒÉ</a></li>
        </ul>
    </div>
    {% endif %}

    <div class="main-content">
        <header>
            {% if request.user.is_authenticated %}
                <div class="header-left">
                    <h1>{% block header %}{% endblock %}</h1>
                </div>
                <div class="header-right">
                    <button id="theme-toggle" class="btn">üåô</button>
                </div>
            {% endif %}
        </header>

        <section class="{% if not request.user.is_authenticated %}login-section{% endif %}">
            {% block content %}
            {% endblock %}
        </section>
    </div>

    <script src="{% static 'core/vendor/jquery-3.7.1.min.js' %}"></script>

    <script src="{% static 'core/vendor/jquery-ui.min.js' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
          flatpickr("input[type='date']", {
              dateFormat: "Y-m-d",
              allowInput: true
          });
      });
    </script>

    <script>
      (function () {
        const KEY = "ui_theme";
        const btn = document.getElementById("theme-toggle");

        const saved = localStorage.getItem(KEY);
        if (saved === "dark") {
          document.body.classList.remove("light-theme");
          document.body.classList.add("dark-theme");
          if (btn) btn.textContent = "‚òÄÔ∏è";
        } else {
          document.body.classList.remove("dark-theme");
          document.body.classList.add("light-theme");
          if (btn) btn.textContent = "üåô";
        }

        if (btn) {
          btn.addEventListener("click", function () {
            const dark = document.body.classList.toggle("dark-theme");
            document.body.classList.toggle("light-theme", !dark);
            btn.textContent = dark ? "‚òÄÔ∏è" : "üåô";
            localStorage.setItem(KEY, dark ? "dark" : "light");
          });
        }
      })();
    </script>

    {% block extra_js %}
    {% endblock %}

</body>
</html>